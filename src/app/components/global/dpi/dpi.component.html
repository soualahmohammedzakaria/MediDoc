<div class="w-full mx-auto px-4 md:px-20 py-16">
  <div class="flex justify-between items-center">
    <h1 class="text-4xl font-nunito font-semibold mb-4">Dossier Patient</h1>
    <img
      src="/assets/images/common/qr.svg"
      class="size-8 cursor-pointer"
      (click)="showPopup()"
    />
  </div>
  <div class="flex flex-col w-full gap-4">
    <InfoPersonal [patientData]="patientData"></InfoPersonal>
    <HistoriqueDpi
      [medicalHistory]="HistoriqueMedical"
      [filteredHistory]="HistoriqueMedical"
    ></HistoriqueDpi>
    <OrdannanceDpi
      [prescriptions]="prescriptions"
      [filteredHistory]="prescriptions"
    ></OrdannanceDpi>
    <ResultatExamDpi
      [prescriptions]="bilans"
    ></ResultatExamDpi>
    <AdministrationDoc></AdministrationDoc>
  </div>
  <!-- Pass props to the QrPopUpDpi component -->
  <div
    *ngIf="isPopupVisible"
    class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"
    (click)="hidePopup()"
  >
    <div
      class="bg-white rounded-lg shadow-lg p-6 w-96 relative flex flex-col items-center"
      (click)="$event.stopPropagation()"
    >
      <h2 class="text-xl font-semibold text-center mb-4">Code QR</h2>
      <qrcode [qrdata]="qrCodeValue" [width]="250"></qrcode>
      <p class="text-center mt-4">
        <span class="font-bold">{{ patientData.nom }}</span
        ><br />
      </p>
      <button
        class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
        (click)="hidePopup()"
      >
        âœ–
      </button>
    </div>
  </div>
</div>
